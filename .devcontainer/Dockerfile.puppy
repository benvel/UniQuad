# ==============================================================
# New image 'uniquad:puppy' based on 'uniquad:first'
# ==============================================================
FROM uniquad:first

ENV DEBIAN_FRONTEND=noninteractive
SHELL ["/bin/bash", "-c"]

# --------------------------------------------------------------
# Install additional Python dependencies
# --------------------------------------------------------------
RUN pip3 install --no-cache-dir --upgrade pip && \
    pip3 install --no-cache-dir "numpy<2" && \
    pip3 install --no-cache-dir torch==2.0.1+cpu --index-url https://download.pytorch.org/whl/cpu && \
    pip3 install --no-cache-dir cvxopt

# --------------------------------------------------------------
# Clone Go2Py Repository into /root/Go2Py (Safe from volume mounts)
# --------------------------------------------------------------
WORKDIR /root
RUN git clone https://github.com/machines-in-motion/Go2Py.git

# --------------------------------------------------------------
# Set PYTHONPATH automatically
# --------------------------------------------------------------
# Point to the repository root so 'import Go2Py' works everywhere.
ENV PYTHONPATH="${PYTHONPATH}:/root/Go2Py"

# --------------------------------------------------------------
# Final working directory for YOU
# --------------------------------------------------------------
WORKDIR /root/ROBO
